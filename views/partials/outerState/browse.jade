div.container#browse-container
        .row(style="height: 100%;")
            .col-md-3.class-selection-col
                .class-selection-container.clearfix
                    h4 Classes
                    div.no-class-message(ng-show="me.classes.length == 0") You have no classes! Add some on the profile page.
                    a.class-container(ng-show="me.classes.length != 0", ng-click="filterByClass('All')", ng-class="{'selected' : currentClassFilter == ''}", style="border-bottom: 1px solid #ccc; height: 30px;") ALL
                    a.class-container(ng-show="me.classes.length != 0", ng-repeat="class in me.classes", ng-click="filterByClass(class)", ng-class="{'selected' : class == currentClassFilter}")
                        div(once-text="class")

            .col-md-8.browse-col
                .my-profile-info-container.row
                    .col-md-2.img-col
                        img(once-src="me.picture || '/img/generic_avatar.gif'")
                    .col-md-10.name-col
                        .text-left
                            h2.name(once-text="me.name")
                        .btn.btn-main.btn-status(ng-click="statusInputShow = true;", ng-show="!statusInputShow")
                            | Edit Status

                    .col-md-10.col-xs-9.status-col
                        .status-date(ng-show="!statusInputShow") {{me.statusDateFormatted}}
                        .text-left.status(ng-show="!statusInputShow") {{me.status || "You don't have a status right now! Update your status to tell other users what you're working on."}}
                        .status-update(ng-show="statusInputShow")
                            textarea.status-input(ng-model="statusInput")
                            a.btn-status-save(ng-click="saveStatusUpdate()")
                                i.glyphicon.glyphicon-ok
                            a.btn-status-cancel(ng-click="cancelStatusUpdate()")
                                i.glyphicon.glyphicon-remove


                .browse-outer-container(infinite-scroll="getMoreUsers()", infinite-scroll-disabled="newUsersDisabled")
                    .browse-search-container
                        div.alert-warn.fade(flash-alert='error', active-class='in alert')
                            strong.alert-message {{flash.message}}
                        .search-box-outer
                            i.fa.fa-search.search-icon
                            input.search-box-inner(ng-model="search", placeholder="Filter by class, status updates, and name")

                    .browse-inner-container
                        a.browse-sm-container.offline(ng-repeat="user in users | browseFilter:search:currentClassFilter | orderBy: 'statusCreated' : true track by user._id",
                        ng-class="{'online': user.onlineStatus.online}", ng-click="goToMessages(user)")
                            i.glyphicon.glyphicon-comment
                            .profile-info-container
                                .row
                                    .col-xs-2.img-col
                                        img(once-src="getThumbnail(user.picture)")
                                    .col-xs-8.status-col
                                        .name.text-left(once-text="user.name")
                                        .status-date {{formatDate(user.statusCreated)}}
                                        .status.text-left {{user.status || 'No status to display.'}}
                                    .col-xs-2.class-col
                                        .text-left(ng-repeat="class in user.classes", once-text="class", once-if="user.classes.length > 0")
                                        .text-left(once-if="user.classes.length == 0") No classes.

                            .chat-container
                                .chat-message-display-container
                                    .message-row(ng-repeat="message in user.messages", ng-class="{'me' : message.from != user._id")

                                .chat-input-container
                                    textarea.input
                        .manual-load-button(ng-click="getMoreUsers()") {{ loadUsersButtonText }}

